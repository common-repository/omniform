(()=>{"use strict";var e,t={161:()=>{const e=window.React;var t=function(){return t=Object.assign||function(e){for(var t,l=1,o=arguments.length;l<o;l++)for(var r in t=arguments[l])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},t.apply(this,arguments)};function l(e){return e.toLowerCase()}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var o=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],r=/[^A-Z0-9]+/gi;function n(e,t,l){return t instanceof RegExp?e.replace(t,l):t.reduce((function(e,t){return e.replace(t,l)}),e)}function a(e){return function(e){return e.charAt(0).toUpperCase()+e.substr(1)}(e.toLowerCase())}const i=window.wp.blocks,c=window.wp.data,m=window.wp.htmlEntities,s=window.wp.hooks,d=window.wp.compose,h=JSON.parse('{"name":"omniform/form"}'),f=window.wp.blockEditor,v=window.wp.components,E=window.wp.coreData,p=window.wp.element,u=window.wp.i18n,Z="omniform",V="omniform_response",H=["omniform/button","omniform/fieldset","omniform/field","omniform/label","omniform/input","omniform/hidden","omniform/textarea","omniform/select","omniform/select-group","omniform/select-option","omniform/captcha","omniform/response-notification","core/audio","core/block","core/code","core/column","core/columns","core/cover","core/file","core/gallery","core/group","core/heading","core/image","core/list-item","core/list","core/missing","core/paragraph","core/pattern","core/preformatted","core/separator","core/site-logo","core/site-tagline","core/site-title","core/spacer","core/table","core/video"];function M({blockProps:t,formId:l,hasInnerBlocks:o}){const r=(0,p.useMemo)((()=>({postId:l,postType:Z})),[l]),[n,a,i]=(0,E.useEntityBlockEditor)("postType",Z,{id:l}),c=(0,f.useInnerBlocksProps)(t,{allowedBlocks:H,value:n,onInput:a,onChange:i,renderAppender:o?void 0:f.InnerBlocks.ButtonBlockAppender});return(0,e.createElement)(f.BlockContextProvider,{value:r},(0,e.createElement)("div",{...c}))}const _=window.wp.url,w=window.wp.editPost;function P({formId:t,isDocumentPanel:l}){const{siteTitle:o,siteEmail:r}=(0,c.useSelect)((e=>{const{getEntityRecord:t}=e(E.store),l=t("root","site")||{};return{siteTitle:l?.title,siteEmail:l?.email}}),[]),[n]=(0,E.useEntityProp)("postType",Z,"title",t),[a,i]=(0,E.useEntityProp)("postType",Z,"meta",t),m=a?.notify_email,s=a?.notify_email_subject,d=l?w.PluginDocumentSettingPanel:v.PanelBody;return(0,e.createElement)(d,{name:"omniform-email-notification",title:(0,u.__)("Email Notification","omniform")},(0,e.createElement)(v.FormTokenField,{label:(0,u.__)("Notify These Emails","omniform"),value:m,onChange:e=>{i({...a,notify_email:e})},placeholder:r}),(0,e.createElement)(v.TextControl,{label:(0,u.__)("Notification Subject","omniform"),value:s,onChange:e=>{i({...a,notify_email_subject:e})},placeholder:(0,u.sprintf)(
// translators: %1$s represents the blog name, %2$s represents the form title.
// translators: %1$s represents the blog name, %2$s represents the form title.
(0,u.__)("New Response: %1$s - %2$s","omniform"),o,n),help:(0,u.__)("Write a short headline for the notification.","omniform")}))}const g=window.wp.primitives,y=(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)(g.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M6.68822 16.625L5.5 17.8145L5.5 5.5L18.5 5.5L18.5 16.625L6.68822 16.625ZM7.31 18.125L19 18.125C19.5523 18.125 20 17.6773 20 17.125L20 5C20 4.44772 19.5523 4 19 4H5C4.44772 4 4 4.44772 4 5V19.5247C4 19.8173 4.16123 20.086 4.41935 20.2237C4.72711 20.3878 5.10601 20.3313 5.35252 20.0845L7.31 18.125ZM16 9.99997H8V8.49997H16V9.99997ZM8 14H13V12.5H8V14Z"}));function B({formId:t,isDocumentPanel:l}){const o=l?w.PluginDocumentSettingPanel:v.PanelBody;return(0,e.createElement)(o,{className:"omniform-view-responses__panel"},(0,e.createElement)(v.Button,{icon:y,href:(0,_.addQueryArgs)("edit.php",{post_type:V,omniform_id:t})},(0,u.__)("View responses","omniform")))}function b({formId:t,isEntityAvailable:l}){const[o,r]=(0,E.useEntityProp)("postType",Z,"title",t);return l&&(0,e.createElement)(f.InspectorControls,null,(0,e.createElement)(B,{formId:t}),(0,e.createElement)(v.PanelBody,{title:(0,u.__)("Form Settings","omniform")},(0,e.createElement)(v.TextControl,{label:(0,u.__)("Name","omniform"),value:o,onChange:r,help:(0,u.__)("This name will not be visible to viewers and is only for identifying the form.","omniform")}),(0,e.createElement)(v.Button,{variant:"primary",href:(0,_.addQueryArgs)("post.php",{action:"edit",post:t})},(0,u.__)("View in Form Editor","omniform"))),(0,e.createElement)(P,{formId:t}))}const C=window.wp.notices;function F(e){const{forms:t=[],isResolving:l}=(0,c.useSelect)((e=>{var t,l;const{getEntityRecords:o,isResolving:r}=e(E.store),n={per_page:-1,status:"publish"},a={per_page:-1,status:"draft"};return{forms:[...null!==(t=o("postType",Z,n))&&void 0!==t?t:[],...null!==(l=o("postType",Z,a))&&void 0!==l?l:[]],isLoading:r("getEntityRecords",["postType",Z,n])||r("getEntityRecords",["postType",Z,a])}}),[]);return{forms:(0,p.useMemo)((()=>t&&t.filter((t=>t.id!==e))||[]),[t,e]),isResolving:l}}const x=(0,e.createElement)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),S=(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#D92E83",fillRule:"evenodd",d:"M3.33 15.424a4.842 4.842 0 0 1 0-6.848l.207-.208v-2.42a2.421 2.421 0 0 1 2.421-2.422H8.38l.086-.086a4.842 4.842 0 0 1 6.848 0l.086.086h2.665a2.421 2.421 0 0 1 2.421 2.421v2.665a4.842 4.842 0 0 1 0 6.776v2.665a2.421 2.421 0 0 1-2.421 2.42h-2.665l-.086.087a4.842 4.842 0 0 1-6.848 0l-.086-.086H5.96a2.421 2.421 0 0 1-2.422-2.421v-2.421l-.207-.208ZM12 5a7 7 0 0 1 7 7h-1.604A5.396 5.396 0 0 0 12 6.604V5Zm0 12.396V19a7 7 0 0 1-7-7h1.604A5.396 5.396 0 0 0 12 17.396ZM15.5 12A3.5 3.5 0 0 0 12 8.5v1.896c.886 0 1.604.718 1.604 1.604H15.5Zm-5.104 0c0 .886.718 1.604 1.604 1.604V15.5A3.5 3.5 0 0 1 8.5 12h1.896Z",clipRule:"evenodd"})),k=((0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#D92E83",fillRule:"evenodd",d:"M4 11a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2H4Zm16 2H4v2h16v-2Z",clipRule:"evenodd"}),(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M2 7h8v2H2V7Z"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16ZM16 17H5V7h11l3.55 5L16 17Z"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M14 11H6v2h8v-2Z"}),(0,e.createElement)(g.Path,{fill:"#D92E83",fillRule:"evenodd",d:"M2 9a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9Zm2 0h16v6H4V9Z",clipRule:"evenodd"})),(0,e.createElement)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none"},(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M12 1.95c-5.52 0-10 4.48-10 10s4.48 10 10 10h5v-2h-5c-4.34 0-8-3.66-8-8s3.66-8 8-8 8 3.66 8 8v1.43c0 .79-.71 1.57-1.5 1.57s-1.5-.78-1.5-1.57v-1.43c0-2.76-2.24-5-5-5s-5 2.24-5 5 2.24 5 5 5c1.38 0 2.64-.56 3.54-1.47.65.89 1.77 1.47 2.96 1.47 1.97 0 3.5-1.6 3.5-3.57v-1.43c0-5.52-4.48-10-10-10Zm0 13c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3Z"})),(0,e.createElement)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none"},(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5Zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2Zm-3-4h8v2H8v-2Z"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#D92E83",d:"m20.5 10 .5-2h-4l1-4h-2l-1 4h-4l1-4h-2L9 8H5l-.5 2h4l-1 4h-4L3 16h4l-1 4h2l1-4h4l-1 4h2l1-4h4l.5-2h-4l1-4h4Zm-7 4h-4l1-4h4l-1 4Z"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2Zm0 16H5V5h14v14ZM17.99 9l-1.41-1.42-6.59 6.59-2.58-2.57-1.42 1.41 4 3.99 8-8Z"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M17 12a5 5 0 1 1-10 0 5 5 0 0 1 10 0Z"}),(0,e.createElement)(g.Path,{fill:"#D92E83",fillRule:"evenodd",d:"M2 12C2 6.48 6.48 2 12 2s10 4.48 10 10-4.48 10-10 10S2 17.52 2 12Zm2 0c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8-8 3.58-8 8Z",clipRule:"evenodd"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2Zm0 16H5V10h14v10Zm0-12H5V6h14v2ZM9 14H7v-2h2v2Zm4 0h-2v-2h2v2Zm4 0h-2v-2h2v2Zm-8 4H7v-2h2v2Zm4 0h-2v-2h2v2Zm4 0h-2v-2h2v2Z"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57a.84.84 0 0 0-.31-.05c-.26 0-.51.1-.71.29l-2.2 2.2a15.149 15.149 0 0 1-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02A11.36 11.36 0 0 1 8.5 4c0-.55-.45-1-1-1Z"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2ZM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8Zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67V7Z"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#D92E83",fillRule:"evenodd",d:"M4.273 3 3 4.273 5.727 7H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h11.727l4.003 4.003 1.273-1.273L4.273 3ZM4 9h3.727l2 2H6v2h5.727l2 2H4V9Z",clipRule:"evenodd"}),(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M18.819 15H20V9h-7.181l-2-2H20a2 2 0 0 1 2 2v6a2 2 0 0 1-1.305 1.876L18.819 15Z"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#D92E83",d:"m13.62 8 1.8-3-1.8-3h-3.58l-1.8 3 1.8 3h3.58Zm-3.58 1-1.8 3 1.8 3h3.58l1.8-3-1.8-3h-3.58Zm6.24 2.51h3.59l1.79-3-1.79-3h-3.59l-1.8 3 1.8 3Zm3.59 1h-3.59l-1.8 3 1.8 3h3.59l1.79-3-1.79-3Zm-12.49-1 1.8-3-1.8-3H3.79L2 8.51l1.79 3h3.59Zm0 1H3.79l-1.79 3 1.79 3h3.59l1.8-3-1.8-3ZM10.04 16l-1.8 3 1.8 3h3.58l1.8-3-1.8-3h-3.58Z"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M18 9H6v2h12V9Z"}),(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M6 13h8v2H6v-2Z"}),(0,e.createElement)(g.Path,{fill:"#D92E83",fillRule:"evenodd",d:"M4 5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H4Zm16 2H4v10h16V7Z",clipRule:"evenodd"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M6 7h8v2H6V7Z"}),(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M14 11H6v2h8v-2Z"}),(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M6 15h8v2H6v-2Z"}),(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M18 7h-2v2h2V7Z"}),(0,e.createElement)(g.Path,{fill:"#D92E83",fillRule:"evenodd",d:"M4 3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12.5a1.5 1.5 0 0 0 1.5-1.5V13h2.5a1.5 1.5 0 0 0 1.5-1.5V5a2 2 0 0 0-2-2H4Zm16 8V5H4v14h12v-6.5a1.5 1.5 0 0 1 1.5-1.5H20Z",clipRule:"evenodd"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7Zm-1-5C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2Zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8Z"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M14 10H3v2h11v-2Zm0-4H3v2h11V6Zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4ZM3 16h7v-2H3v2Z"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M7 7h2v2H7V7Z"}),(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M9 11H7v2h2v-2Z"}),(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M7 15h2v2H7v-2Z"}),(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M17 11h-6v2h6v-2Z"}),(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M11 15h6v2h-6v-2Z"}),(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M17 7h-6v2h6V7Z"}),(0,e.createElement)(g.Path,{fill:"#D92E83",fillRule:"evenodd",d:"M5 3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H5Zm14 2H5v14h14V5Z",clipRule:"evenodd"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M17 11H7v2h10v-2Z"}),(0,e.createElement)(g.Path,{fill:"#D92E83",fillRule:"evenodd",d:"M2 8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8Zm2 0h16v8H4V8Z",clipRule:"evenodd"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2Zm1 15h-2v-2h2v2Zm0-4h-2V7h2v6Z"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{d:"M7 7h2v2H7V7Z"}),(0,e.createElement)(g.Path,{d:"M9 11H7v2h2v-2Z"}),(0,e.createElement)(g.Path,{d:"M7 15h2v2H7v-2Z"}),(0,e.createElement)(g.Path,{d:"M17 11h-6v2h6v-2Z"}),(0,e.createElement)(g.Path,{d:"M11 15h6v2h-6v-2Z"}),(0,e.createElement)(g.Path,{d:"M17 7h-6v2h6V7Z"}),(0,e.createElement)(g.Path,{fillRule:"evenodd",d:"M5 3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H5Zm14 2H5v14h14V5Z",clipRule:"evenodd"}))),D=(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5Zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14Z"})),R=(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h2c0-1.66 1.34-3 3-3s3 1.34 3 3v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2Zm0 12H6V10h12v10Zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2Z"}));function A({closeModal:t,onCreate:l}){const[o,r]=(0,p.useState)(""),[n,a]=(0,p.useState)("uncategorized"),[i,c]=(0,p.useState)(!1),m=(0,d.useInstanceId)(A),s=[{type:"uncategorized",description:(0,u.__)("General forms are used to collect and organize information for processing or storage.","omniform"),icon:k,label:(0,u.__)("General","omniform")},{type:"search",description:(0,u.__)("A search form allows users to enter a search query and find relevant information on the website.","omniform"),icon:D,label:(0,e.createElement)(e.Fragment,null,(0,u.__)("Search","omniform"),(0,e.createElement)("span",{className:"badge"},(0,u.__)("coming soon","omniform"))),disabled:!0},{type:"login",description:(0,u.__)("A login form is used to authenticate a user's identity and grant them access to the website.","omniform"),icon:R,label:(0,e.createElement)(e.Fragment,null,(0,u.__)("Login","omniform"),(0,e.createElement)("span",{className:"badge"},(0,u.__)("coming soon","omniform"))),disabled:!0}];return(0,e.createElement)(v.Modal,{title:(0,u.__)("Create a form","omniform"),closeLabel:(0,u.__)("Close","omniform"),onRequestClose:t,overlayClassName:"omniform-create-form-modal"},(0,e.createElement)("form",{onSubmit:async e=>{e.preventDefault(),o&&(c(!0),await l({title:o,type:n}))}},(0,e.createElement)(v.TextControl,{label:(0,u.__)("Name","omniform"),value:o,onChange:r,required:!0}),(0,e.createElement)(v.BaseControl,{label:(0,u.__)("Type","omniform"),id:`omniform-create-form-modal__area-selection-${m}`,className:"omniform-create-form-modal__area-base-control"},(0,e.createElement)(v.__experimentalRadioGroup,{label:(0,u.__)("Type","omniform"),className:"omniform-create-form-modal__area-radio-group",id:`omniform-create-form-modal__area-selection-${m}`,onChange:a,checked:n},s.map((({icon:t,label:l,type:o,description:r,disabled:a})=>(0,e.createElement)(v.__experimentalRadio,{key:o,value:o,className:"omniform-create-form-modal__area-radio",disabled:a},(0,e.createElement)(v.Flex,{align:"start",justify:"start"},(0,e.createElement)(v.FlexItem,null,(0,e.createElement)(v.Icon,{icon:t})),(0,e.createElement)(v.FlexBlock,{className:"omniform-create-form-modal__option-label"},l,(0,e.createElement)("div",null,r)),(0,e.createElement)(v.FlexItem,{className:"omniform-create-form-modal__checkbox"},n===o&&(0,e.createElement)(v.Icon,{icon:x})))))))),(0,e.createElement)(v.Flex,{className:"omniform-create-form-modal__modal-actions",justify:"flex-end"},(0,e.createElement)(v.FlexItem,null,(0,e.createElement)(v.Button,{variant:"secondary",onClick:()=>{t()}},(0,u.__)("Cancel","omniform"))),(0,e.createElement)(v.FlexItem,null,(0,e.createElement)(v.Button,{variant:"primary",type:"submit",disabled:!o,isBusy:i},(0,u.__)("Create","omniform"))))))}function I({setAttributes:t,onOpenSelectionModal:l}){const{forms:o,isResolving:r}=F(),n=function(e){const{saveEntityRecord:t}=(0,c.useDispatch)(E.store);return async(l=[],o=(0,u.__)("Untitled Form","omniform"),r="uncategorized")=>{const n={title:o,content:(0,i.serialize)(l),status:"publish"},a=await t("postType",Z,n);e({ref:a.id})}}(t),[a,m]=(0,p.useState)(!1),{createSuccessNotice:s,createErrorNotice:d}=(0,c.useDispatch)(C.store);return(0,e.createElement)(v.Placeholder,{icon:null,label:(0,u.__)("OmniForm Form","omniform"),instructions:(0,u.__)("Choose an existing form or create a new one.","omniform")},r&&(0,e.createElement)(v.Spinner,null),!r&&!!o.length&&(0,e.createElement)(v.Button,{variant:"primary",onClick:l},(0,u.__)("Choose","omniform")),!r&&(0,e.createElement)(v.Button,{variant:"secondary",onClick:()=>m(!0)},(0,u.__)("Start blank","omniform")),a&&(0,e.createElement)(A,{closeModal:()=>m(!1),onCreate:async({title:e,type:t})=>{if(e)try{await n([],e,t),s((0,u.__)("Form created","omniform"),{type:"snackbar"}),m(!1)}catch(e){const t=e.message&&"unknown_error"!==e.code?e.message:(0,u.__)("An error occurred while creating the form.","omniform");d(t,{type:"snackbar"}),m(!1)}else d((0,u.__)("Title is not defined","omniform"),{type:"snackbar"})}}))}function G({formId:t=null,onClose:l,setAttributes:o}){const{forms:r}=F(t),n=(0,p.useMemo)((()=>r.map((e=>({name:e.slug,title:e.title.raw,blocks:(0,i.createBlock)("omniform/form",{ref:e.id}),viewportWidth:768,form:e})))),r),a=(0,d.useAsyncList)(n),c=!!r.length;return(0,e.createElement)("div",{className:"block-library-form__selection-content"},c&&(0,e.createElement)(f.__experimentalBlockPatternsList,{blockPatterns:n,shownPatterns:a,onClickPattern:e=>{var t;t=e.form,o({ref:t.id}),l()},orientation:"horizontal"}),!c&&(0,e.createElement)(v.__experimentalHStack,{alignment:"center"},(0,e.createElement)("p",null,(0,u.__)("No results found.","omniform"))))}(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M12 2 4 5v6.09c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91V5l-8-3Zm6 9.09c0 4-2.55 7.7-6 8.83-3.45-1.13-6-4.82-6-8.83v-4.7l6-2.25 6 2.25v4.7Z"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#1C3AA9",d:"M22 11.986c0-.143-.004-.286-.01-.43V3.44l-2.237 2.244A9.956 9.956 0 0 0 12.015 2 9.958 9.958 0 0 0 4.06 5.962l3.667 3.717a4.868 4.868 0 0 1 1.486-1.672c.64-.501 1.547-.91 2.802-.91a1 1 0 0 1 .355.05 4.833 4.833 0 0 1 3.696 2.233l-2.596 2.604c3.288-.013 7.003-.02 8.53.002Z"}),(0,e.createElement)(g.Path,{fill:"#4285F4",d:"M11.957 2c-.143 0-.286.004-.428.01H3.436l2.237 2.244A10.007 10.007 0 0 0 2 12.014c0 3.257 1.55 6.15 3.95 7.979l3.706-3.678a4.864 4.864 0 0 1-1.667-1.49c-.5-.642-.908-1.552-.908-2.81 0-.153.018-.27.051-.356A4.851 4.851 0 0 1 9.36 7.952l2.596 2.603c-.013-3.298-.02-7.023.002-8.555Z"}),(0,e.createElement)(g.Path,{fill:"#ABABAB",d:"M2 12.014c0 .144.004.287.01.43v8.116l2.238-2.244A9.956 9.956 0 0 0 11.985 22a9.959 9.959 0 0 0 7.956-3.962l-3.668-3.717a4.869 4.869 0 0 1-1.485 1.672c-.64.501-1.548.911-2.803.911a.998.998 0 0 1-.354-.051 4.833 4.833 0 0 1-3.696-2.233l2.596-2.604c-3.289.013-7.004.02-8.531-.002Z"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#0074BF",d:"M17 19.5h-2.5V22H17v-2.5Z",opacity:".5"}),(0,e.createElement)(g.Path,{fill:"#0074BF",d:"M14.5 19.5H12V22h2.5v-2.5ZM12 19.5H9.5V22H12v-2.5Z",opacity:".7"}),(0,e.createElement)(g.Path,{fill:"#0074BF",d:"M9.5 19.5H7V22h2.5v-2.5Z",opacity:".5"}),(0,e.createElement)(g.Path,{fill:"#0082BF",d:"M19.5 17H17v2.5h2.5V17Z",opacity:".7"}),(0,e.createElement)(g.Path,{fill:"#0082BF",d:"M17 17h-2.5v2.5H17V17Z",opacity:".8"}),(0,e.createElement)(g.Path,{fill:"#0082BF",d:"M14.5 17H12v2.5h2.5V17ZM12 17H9.5v2.5H12V17Z"}),(0,e.createElement)(g.Path,{fill:"#0082BF",d:"M9.5 17H7v2.5h2.5V17Z",opacity:".8"}),(0,e.createElement)(g.Path,{fill:"#0082BF",d:"M7 17H4.5v2.5H7V17Z",opacity:".7"}),(0,e.createElement)(g.Path,{fill:"#008FBF",d:"M22 14.5h-2.5V17H22v-2.5Z",opacity:".5"}),(0,e.createElement)(g.Path,{fill:"#008FBF",d:"M19.5 14.5H17V17h2.5v-2.5Z",opacity:".8"}),(0,e.createElement)(g.Path,{fill:"#008FBF",d:"M17 14.5h-2.5V17H17v-2.5ZM14.5 14.5H12V17h2.5v-2.5ZM12 14.5H9.5V17H12v-2.5ZM9.5 14.5H7V17h2.5v-2.5Z"}),(0,e.createElement)(g.Path,{fill:"#008FBF",d:"M7 14.5H4.5V17H7v-2.5Z",opacity:".8"}),(0,e.createElement)(g.Path,{fill:"#008FBF",d:"M4.5 14.5H2V17h2.5v-2.5Z",opacity:".5"}),(0,e.createElement)(g.Path,{fill:"#009DBF",d:"M22 12h-2.5v2.5H22V12Z",opacity:".7"}),(0,e.createElement)(g.Path,{fill:"#009DBF",d:"M19.5 12H17v2.5h2.5V12ZM17 12h-2.5v2.5H17V12ZM14.5 12H12v2.5h2.5V12ZM12 12H9.5v2.5H12V12ZM9.5 12H7v2.5h2.5V12ZM7 12H4.5v2.5H7V12Z"}),(0,e.createElement)(g.Path,{fill:"#009DBF",d:"M4.5 12H2v2.5h2.5V12Z",opacity:".7"}),(0,e.createElement)(g.Path,{fill:"#00ABBF",d:"M22 9.5h-2.5V12H22V9.5Z",opacity:".7"}),(0,e.createElement)(g.Path,{fill:"#00ABBF",d:"M19.5 9.5H17V12h2.5V9.5ZM17 9.5h-2.5V12H17V9.5ZM14.5 9.5H12V12h2.5V9.5ZM12 9.5H9.5V12H12V9.5ZM9.5 9.5H7V12h2.5V9.5ZM7 9.5H4.5V12H7V9.5Z"}),(0,e.createElement)(g.Path,{fill:"#00ABBF",d:"M4.5 9.5H2V12h2.5V9.5Z",opacity:".7"}),(0,e.createElement)(g.Path,{fill:"#00B9BF",d:"M22 7h-2.5v2.5H22V7Z",opacity:".5"}),(0,e.createElement)(g.Path,{fill:"#00B9BF",d:"M19.5 7H17v2.5h2.5V7Z",opacity:".8"}),(0,e.createElement)(g.Path,{fill:"#00B9BF",d:"M17 7h-2.5v2.5H17V7ZM14.5 7H12v2.5h2.5V7ZM12 7H9.5v2.5H12V7ZM9.5 7H7v2.5h2.5V7Z"}),(0,e.createElement)(g.Path,{fill:"#00B9BF",d:"M7 7H4.5v2.5H7V7Z",opacity:".8"}),(0,e.createElement)(g.Path,{fill:"#00B9BF",d:"M4.5 7H2v2.5h2.5V7Z",opacity:".5"}),(0,e.createElement)(g.Path,{fill:"#00C6BF",d:"M19.5 4.5H17V7h2.5V4.5Z",opacity:".7"}),(0,e.createElement)(g.Path,{fill:"#00C6BF",d:"M17 4.5h-2.5V7H17V4.5Z",opacity:".8"}),(0,e.createElement)(g.Path,{fill:"#00C6BF",d:"M14.5 4.5H12V7h2.5V4.5ZM12 4.5H9.5V7H12V4.5Z"}),(0,e.createElement)(g.Path,{fill:"#00C6BF",d:"M9.5 4.5H7V7h2.5V4.5Z",opacity:".8"}),(0,e.createElement)(g.Path,{fill:"#00C6BF",d:"M7 4.5H4.5V7H7V4.5Z",opacity:".7"}),(0,e.createElement)(g.Path,{fill:"#00D4BF",d:"M17 2h-2.5v2.5H17V2Z",opacity:".5"}),(0,e.createElement)(g.Path,{fill:"#00D4BF",d:"M14.5 2H12v2.5h2.5V2ZM12 2H9.5v2.5H12V2Z",opacity:".7"}),(0,e.createElement)(g.Path,{fill:"#00D4BF",d:"M9.5 2H7v2.5h2.5V2Z",opacity:".5"}),(0,e.createElement)(g.Path,{fill:"#fff",d:"m8.582 11.211.697-1.559c.254-.4.22-.89-.058-1.167a.713.713 0 0 0-.435-.206.77.77 0 0 0-.33.033 1.05 1.05 0 0 0-.58.45s-.954 2.224-1.31 3.224c-.354 1-.212 2.834 1.156 4.206 1.451 1.45 3.553 1.783 4.893.777a.84.84 0 0 0 .157-.103l4.13-3.448c.2-.166.497-.508.23-.898-.26-.38-.752-.121-.953.007l-2.376 1.729a.107.107 0 0 1-.154-.018c-.06-.074-.071-.27.024-.349l3.643-3.092c.315-.284.359-.696.104-.978-.249-.277-.644-.268-.962.018l-3.28 2.564a.145.145 0 0 1-.21-.027c-.065-.072-.09-.197-.016-.27L16.667 8.5a.726.726 0 0 0 .036-1.026.693.693 0 0 0-.504-.216.74.74 0 0 0-.522.207l-3.796 3.566c-.09.09-.269 0-.29-.106a.114.114 0 0 1 .032-.106L14.53 7.51a.715.715 0 1 0-1.01-1.014l-4.407 4.872c-.158.158-.39.166-.501.074a.166.166 0 0 1-.029-.23Z"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#F38020",d:"M12.703 3.165a9.406 9.406 0 0 0-6.538 2.377l.595-3.26L5.216 2 4.17 7.724 9.896 8.77l.282-1.545-2.94-.536a7.822 7.822 0 1 1-2.41 3.9l-1.52-.399a9.42 9.42 0 1 0 9.395-7.024Z"}),(0,e.createElement)(g.Path,{fill:"#F38020",fillRule:"evenodd",d:"m18.28 10.253-1.412-1.411-5.538 5.538-2.202-2.201-1.414 1.413 3.62 3.62 1.413-1.415-.006-.005 5.539-5.539Z",clipRule:"evenodd"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#D92E83",d:"m9.55 18-5.7-5.7 1.425-1.425L9.55 15.15l9.175-9.175L20.15 7.4 9.55 18Z"})),(0,e.createElement)(g.SVG,{viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{fill:"#D92E83",d:"M12 17c.283 0 .52-.096.713-.288A.968.968 0 0 0 13 16a.968.968 0 0 0-.287-.713A.968.968 0 0 0 12 15a.968.968 0 0 0-.713.287A.968.968 0 0 0 11 16c0 .283.096.52.287.712.192.192.43.288.713.288Zm-1-4h2V7h-2v6Zm1 9a9.738 9.738 0 0 1-3.9-.788 10.099 10.099 0 0 1-3.175-2.137c-.9-.9-1.612-1.958-2.137-3.175A9.738 9.738 0 0 1 2 12c0-1.383.263-2.683.788-3.9a10.099 10.099 0 0 1 2.137-3.175c.9-.9 1.958-1.612 3.175-2.137A9.738 9.738 0 0 1 12 2c1.383 0 2.683.263 3.9.788a10.098 10.098 0 0 1 3.175 2.137c.9.9 1.613 1.958 2.137 3.175A9.738 9.738 0 0 1 22 12a9.738 9.738 0 0 1-.788 3.9 10.098 10.098 0 0 1-2.137 3.175c-.9.9-1.958 1.613-3.175 2.137A9.738 9.738 0 0 1 12 22Zm0-2c2.233 0 4.125-.775 5.675-2.325C19.225 16.125 20 14.233 20 12c0-2.233-.775-4.125-2.325-5.675C16.125 4.775 14.233 4 12 4c-2.233 0-4.125.775-5.675 2.325C4.775 7.875 4 9.767 4 12c0 2.233.775 4.125 2.325 5.675C7.875 19.225 9.767 20 12 20Z"}));const L=window.wp.editor;(0,window.wp.plugins.registerPlugin)("omniform",{render:()=>{const{postType:t,postId:l}=(0,c.useSelect)((e=>({postType:e(L.store).getCurrentPostType(),postId:e(L.store).getCurrentPostId()})));return Z===t&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(B,{formId:l,isDocumentPanel:!0}),(0,e.createElement)(P,{formId:l,isDocumentPanel:!0}))}});const{name:T}=h;(0,i.registerBlockType)(T,{edit:function({context:t,attributes:l,setAttributes:o,clientId:r}){const{postId:n,postType:a}=t,{ref:i}=l,m=a===Z?n:i,s=(0,f.__experimentalUseHasRecursion)([m]),[d,h]=(0,p.useState)(!1),{isResolved:V,hasInnerBlocks:H,isMissing:_}=(0,c.useSelect)((e=>{const{getEditedEntityRecord:t,hasFinishedResolution:l}=e(E.store),{getBlockCount:o}=e(f.store),n=["postType",Z,m],a=m?t(...n):null,i=!!m&&l("getEditedEntityRecord",n);return{hasInnerBlocks:o(r)>0,isResolved:i,isMissing:i&&!a}}),[m,r]),w=(0,f.useBlockProps)({className:"block-library-block__reusable-block-container"}),P=!m,g=!P&&!_&&V;return H&&_?(0,e.createElement)("div",{...w},(0,e.createElement)(f.Warning,null,(0,u.__)("Form has been deleted or is unavailable.","omniform"))):g&&s?(0,e.createElement)("div",{...w},(0,e.createElement)(f.Warning,null,(0,u.__)("Form cannot be rendered inside itself.","omniform"))):(0,e.createElement)(e.Fragment,null,(0,e.createElement)(f.__experimentalRecursionProvider,{uniqueId:m},(0,e.createElement)(b,{formId:m,isEntityAvailable:g}),P&&(0,e.createElement)("div",{...w},(0,e.createElement)(I,{clientId:r,formId:m,setAttributes:o,onOpenSelectionModal:()=>h(!0)})),g&&(0,e.createElement)(M,{blockProps:w,formId:m,hasInnerBlocks:H}),!P&&!V&&(0,e.createElement)("div",{...w},(0,e.createElement)(v.Spinner,null))),d&&(0,e.createElement)(v.Modal,{overlayClassName:"block-editor-form__selection-modal",title:(0,u.__)("Choose a Form","omniform"),closeLabel:(0,u.__)("Cancel","omniform"),onRequestClose:()=>h(!1),isFullScreen:!0},(0,e.createElement)(G,{formId:m,setAttributes:o,onClose:()=>h(!1)})))},icon:{foreground:"#D92E83",src:S},__experimentalLabel:({ref:e})=>{if(!e)return;const i=(0,c.select)("core").getEntityRecord("postType",Z,e);return i?(0,m.decodeEntities)(i.title?.rendered)||(0,m.decodeEntities)(i.title?.raw)||(s=i.slug,void 0===d&&(d={}),function(e,t){void 0===t&&(t={});for(var a=t.splitRegexp,i=void 0===a?o:a,c=t.stripRegexp,m=void 0===c?r:c,s=t.transform,d=void 0===s?l:s,h=t.delimiter,f=void 0===h?" ":h,v=n(n(e,i,"$1\0$2"),m,"\0"),E=0,p=v.length;"\0"===v.charAt(E);)E++;for(;"\0"===v.charAt(p-1);)p--;return v.slice(E,p).split("\0").map(d).join(f)}(s,t({delimiter:" ",transform:a},d))):void 0;var s,d}}),(0,s.addFilter)("blockEditor.__unstableCanInsertBlockType","omniform/with-block-insertion-restrictions",((e,t)=>"omniform/form"!==t.name||"omniform"!==(0,c.select)("core/editor").getCurrentPostType()?e:(0,c.select)("core/edit-post").isEditingTemplate())),(0,s.addFilter)("editor.BlockEdit","omniform/with-child-block-restrictions",(0,d.createHigherOrderComponent)((t=>l=>(["core/group","core/cover","core/column"].includes(l.name)&&(0,c.select)("core/block-editor").getBlockParentsByBlockName(l.clientId,"omniform/form").length&&(l.attributes.allowedBlocks=["omniform/button","omniform/fieldset","omniform/field","omniform/label","omniform/input","omniform/textarea","omniform/select","omniform/select-group","omniform/select-option","omniform/captcha","core/audio","core/block","core/code","core/column","core/columns","core/cover","core/file","core/gallery","core/group","core/heading","core/image","core/list-item","core/list","core/missing","core/paragraph","core/pattern","core/preformatted","core/separator","core/site-logo","core/site-tagline","core/site-title","core/spacer","core/table","core/video"]),(0,e.createElement)(t,{...l}))),"omniformChildBlockRestrictions"))}},l={};function o(e){var r=l[e];if(void 0!==r)return r.exports;var n=l[e]={exports:{}};return t[e](n,n.exports,o),n.exports}o.m=t,e=[],o.O=(t,l,r,n)=>{if(!l){var a=1/0;for(s=0;s<e.length;s++){for(var[l,r,n]=e[s],i=!0,c=0;c<l.length;c++)(!1&n||a>=n)&&Object.keys(o.O).every((e=>o.O[e](l[c])))?l.splice(c--,1):(i=!1,n<a&&(a=n));if(i){e.splice(s--,1);var m=r();void 0!==m&&(t=m)}}return t}n=n||0;for(var s=e.length;s>0&&e[s-1][2]>n;s--)e[s]=e[s-1];e[s]=[l,r,n]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={708:0,468:0};o.O.j=t=>0===e[t];var t=(t,l)=>{var r,n,[a,i,c]=l,m=0;if(a.some((t=>0!==e[t]))){for(r in i)o.o(i,r)&&(o.m[r]=i[r]);if(c)var s=c(o)}for(t&&t(l);m<a.length;m++)n=a[m],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(s)},l=globalThis.webpackChunkomniform=globalThis.webpackChunkomniform||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var r=o.O(void 0,[468],(()=>o(161)));r=o.O(r)})();